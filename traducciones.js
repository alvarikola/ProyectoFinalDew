// Traducciones del sitio
const traducciones = {
    es: {
        // Menú
        productos: "Productos",
        sobreNosotros: "Sobre Nosotros",
        idioma: "Inglés",
        
        // Productos del menú
        peliculaLosPecadores: "Película Los Pecadores",
        peliculaCars: "Película Cars",
        peliculaSpiderman: "Película The Amazing Spiderman",
        libroJurassicPark: "Libro Jurassic Park",
        cdMichaelJackson: "CD Michael Jackson Thriller",
        
        // Card de producto
        stock: "Stock",
        agregarCarrito: "Agregar al carrito",
        
        // Login
        iniciarSesion: "Iniciar Sesión",
        correoElectronico: "Correo electrónico",
        contrasena: "Contraseña",
        o: "o",
        registrarse: "Registrarse",
        btnIniciarSesion: "Iniciar sesión",
        
        // Registro
        nombre: "Nombre",
        telefono: "Teléfono",
        volverLogin: "Volver al inicio de sesión",
        btnRegistrarse: "Registrarse",
        
        // Errores de validación
        errorEmail: "Debe ser un email válido, ej: name@gmail.com",
        errorContrasena: "Debe ser una contraseña válida, que contenga al menos 12 dígitos con letras, números y un carácter especial",
        errorNombre: "El nombre debe comenzar con mayúscula",
        errorTelefono: "Debe ser un número de teléfono móvil válido, ej: 672 88 88 88",
        errorIban: "Debe ser un IBAN válido, ej: ES12345678901234567890",
        
        // Carrito
        miCarrito: "Mi Carrito",
        cerrarSesion: "Cerrar Sesión",
        carritoVacio: "Tu carrito está vacío",
        cantidad: "Cantidad",
        eliminar: "Eliminar",
        vaciarCarrito: "Vaciar Carrito",
        total: "Total",
        finalizarCompra: "Finalizar Compra",
        
        // Sobre Nosotros
        tituloSobreNosotros: "Sobre Nosotros",
        parrafo1: "Somos un espacio creado para los amantes de las buenas historias, los grandes sonidos y el cine que deja huella. En nuestra tienda online reunimos una cuidada selección de películas, libros y música para que encuentres desde los clásicos imprescindibles hasta las últimas novedades.",
        parrafo2: "Creemos que la cultura se disfruta mejor cuando está al alcance de todos. Por eso trabajamos cada día para ofrecerte un catálogo variado, de calidad y fácil de explorar, pensado tanto para curiosos como para verdaderos apasionados.",
        parrafo3: "Nuestro equipo está formado por lectores empedernidos, cinéfilos y melómanos que comparten una misma misión: ayudarte a descubrir obras que te inspiren, te emocionen y te acompañen. Nos mueve la pasión por el arte y el compromiso de brindarte una experiencia de compra sencilla, segura y cercana.",
        parrafo4: "Gracias por formar parte de esta comunidad donde las historias, la música y el cine nunca dejan de sonar.",
        
        // Alertas
        alertaRegistroExitoso: "¡Registro exitoso!",
        alertaLoginExitoso: "Login realizado con éxito",
        alertaCerrarSesion: "Cierre de sesión realizado con éxito",
        alertaNecesitaLogin: "Necesitas iniciar sesión para comprar productos",
        alertaSinStock: "No hay más stock disponible de",
        alertaStockMaximo: "Stock máximo:",
        alertaSinStockDisponible: "Producto sin stock disponible",
        alertaConfirmarVaciarCarrito: "¿Estás seguro de que quieres vaciar todo el carrito?",
        alertaCarritoVaciado: "Carrito vaciado",
        alertaConfirmarCompra: "¿Confirmar la compra?",
        alertaCompraExitosa: "¡Compra realizada con éxito!",
        alertaErrorCompra: "Error al procesar la compra:",
        alertaError: "Error:",
        alertaErrorConexion: "Error de conexión:"
    },
    en: {
        // Menu
        productos: "Products",
        sobreNosotros: "About Us",
        idioma: "Spanish",
        
        // Menu products
        peliculaLosPecadores: "The Sinners Movie",
        peliculaCars: "Cars Movie",
        peliculaSpiderman: "The Amazing Spiderman Movie",
        libroJurassicPark: "Jurassic Park Book",
        cdMichaelJackson: "Michael Jackson Thriller CD",
        
        // Product card
        stock: "Stock",
        agregarCarrito: "Add to cart",
        
        // Login
        iniciarSesion: "Sign In",
        correoElectronico: "Email",
        contrasena: "Password",
        o: "or",
        registrarse: "Sign Up",
        btnIniciarSesion: "Sign in",
        
        // Register
        nombre: "Name",
        telefono: "Phone",
        volverLogin: "Back to sign in",
        btnRegistrarse: "Sign up",
        
        // Validation errors
        errorEmail: "Must be a valid email, e.g.: name@gmail.com",
        errorContrasena: "Must be a valid password containing at least 12 characters with letters, numbers and a special character",
        errorNombre: "Name must start with a capital letter",
        errorTelefono: "Must be a valid mobile phone number, e.g.: 672 88 88 88",
        errorIban: "Must be a valid IBAN, e.g.: ES12345678901234567890",
        
        // Cart
        miCarrito: "My Cart",
        cerrarSesion: "Sign Out",
        carritoVacio: "Your cart is empty",
        cantidad: "Quantity",
        eliminar: "Remove",
        vaciarCarrito: "Empty Cart",
        total: "Total",
        finalizarCompra: "Checkout",
        
        // About Us
        tituloSobreNosotros: "About Us",
        parrafo1: "We are a space created for lovers of good stories, great sounds and unforgettable cinema. In our online store we gather a carefully selected collection of movies, books and music so you can find everything from essential classics to the latest releases.",
        parrafo2: "We believe that culture is best enjoyed when it's accessible to everyone. That's why we work every day to offer you a varied, quality catalog that's easy to explore, designed for both the curious and true enthusiasts.",
        parrafo3: "Our team is made up of avid readers, film lovers and music enthusiasts who share the same mission: to help you discover works that inspire, move and accompany you. We are driven by a passion for art and a commitment to providing you with a simple, secure and personal shopping experience.",
        parrafo4: "Thank you for being part of this community where stories, music and cinema never stop playing.",
        
        // Alerts
        alertaRegistroExitoso: "Registration successful!",
        alertaLoginExitoso: "Login successful",
        alertaCerrarSesion: "Logout successful",
        alertaNecesitaLogin: "You need to sign in to purchase products",
        alertaSinStock: "No more stock available for",
        alertaStockMaximo: "Maximum stock:",
        alertaSinStockDisponible: "Product out of stock",
        alertaConfirmarVaciarCarrito: "Are you sure you want to empty your cart?",
        alertaCarritoVaciado: "Cart emptied",
        alertaConfirmarCompra: "Confirm purchase?",
        alertaCompraExitosa: "Purchase completed successfully!",
        alertaErrorCompra: "Error processing purchase:",
        alertaError: "Error:",
        alertaErrorConexion: "Connection error:"
    }
};

// Idioma actual (por defecto español)
let idiomaActual = localStorage.getItem('idioma') || 'es';

// Función para cambiar el idioma
function cambiarIdioma() {
    idiomaActual = idiomaActual === 'es' ? 'en' : 'es';
    localStorage.setItem('idioma', idiomaActual);
    aplicarTraducciones();
}

// Función para aplicar las traducciones
function aplicarTraducciones() {
    const t = traducciones[idiomaActual];
    
    // Menú
    document.querySelector('.dropdown h2').textContent = t.productos;
    document.querySelector('h2 a[href="#contenedorSobreNosostros"]').textContent = t.sobreNosotros;
    document.querySelector('.menu button').textContent = t.idioma;
    
    // Productos del menú
    const menuItems = document.querySelectorAll('.dropdown-content li a');
    menuItems[0].textContent = t.peliculaLosPecadores;
    menuItems[1].textContent = t.peliculaCars;
    menuItems[2].textContent = t.peliculaSpiderman;
    menuItems[3].textContent = t.libroJurassicPark;
    menuItems[4].textContent = t.cdMichaelJackson;
    
    // Card de producto
    const btnAgregar = document.getElementById('btnAgregarCarrito');
    if (btnAgregar) btnAgregar.textContent = t.agregarCarrito;
    
    // Login
    document.querySelector('#contenedorLogin h2').textContent = t.iniciarSesion;
    document.getElementById('loginCorreo').placeholder = t.correoElectronico;
    document.getElementById('loginContrasena').placeholder = t.contrasena;
    document.getElementById('btnLogin').textContent = t.btnIniciarSesion;
    document.querySelectorAll('#contenedorLogin .separator')[0].textContent = t.o;
    document.getElementById('btnMostrarRegistro').textContent = t.registrarse;
    
    // Mensajes de error de login
    const loginErrorMessages = document.querySelectorAll('#contenedorLogin .error-message');
    loginErrorMessages[0].textContent = t.errorEmail;
    loginErrorMessages[1].textContent = t.errorContrasena;
    
    // Registro
    document.querySelector('#contenedorRegistro h2').textContent = t.registrarse;
    document.getElementById('regNombre').placeholder = t.nombre;
    document.getElementById('regCorreo').placeholder = t.correoElectronico;
    document.getElementById('regTelefono').placeholder = t.telefono;
    document.getElementById('regIban').placeholder = 'IBAN';
    document.getElementById('regContrasena').placeholder = t.contrasena;
    document.getElementById('btnRegistrarse').textContent = t.btnRegistrarse;
    document.querySelectorAll('#contenedorRegistro .separator')[0].textContent = t.o;
    document.getElementById('btnMostrarLogin').textContent = t.volverLogin;
    
    // Mensajes de error de registro
    const regErrorMessages = document.querySelectorAll('#contenedorRegistro .error-message');
    regErrorMessages[0].textContent = t.errorNombre;
    regErrorMessages[1].textContent = t.errorEmail;
    regErrorMessages[2].textContent = t.errorTelefono;
    regErrorMessages[3].textContent = t.errorIban;
    regErrorMessages[4].textContent = t.errorContrasena;
    
    // Carrito
    document.querySelector('.carrito-header h2').textContent = t.miCarrito;
    document.getElementById('btnCerrarSesion').textContent = t.cerrarSesion;
    document.getElementById('carritoVacio').textContent = t.carritoVacio;
    document.getElementById('btnVaciarCarrito').textContent = t.vaciarCarrito;
    document.querySelector('.carrito-total h3').innerHTML = `${t.total}: <span id="totalCarrito">0.00€</span>`;
    document.getElementById('btnFinalizarCompra').textContent = t.finalizarCompra;
    
    // Sobre Nosotros
    document.querySelector('#infoSobreNosotros h1').textContent = t.tituloSobreNosotros;
    const parrafos = document.querySelectorAll('#infoSobreNosotros p');
    parrafos[0].textContent = t.parrafo1;
    parrafos[1].textContent = t.parrafo2;
    parrafos[2].textContent = t.parrafo3;
    parrafos[3].textContent = t.parrafo4;
    
    // Actualizar el HTML lang
    document.documentElement.lang = idiomaActual;
}

// Función para obtener traducción (útil para alertas)
function obtenerTraduccion(clave) {
    return traducciones[idiomaActual][clave];
}

// Aplicar traducciones al cargar la página
document.addEventListener('DOMContentLoaded', () => {
    aplicarTraducciones();
    
    // Evento para el botón de cambio de idioma
    document.querySelector('.menu button').addEventListener('click', cambiarIdioma);
});